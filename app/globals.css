@import "tailwindcss";

@theme {
  /* Theme tokens */
  --color-dark-bg: #07090f;
  --color-dark-secondary: #11131a;
  --color-dark-tertiary: #1a1d26;
  --color-card-bg: rgba(17, 19, 26, 0.88);
  --color-card-border: rgba(255, 255, 255, 0.1);

  --color-primary-start: #10b981;
  --color-primary-end: #059669;
  --color-accent: #f59e0b;
  --color-accent-subtle: #fbbf24;

  --color-text-main: #f5f7fa;
  --color-text-secondary: #b4bcc9;
  --color-text-muted: #7f8795;

  --color-success: #22c55e;
  --color-warning: #f59e0b;
  --color-error: #ef4444;
  --color-info: #3b82f6;

  --font-sans: "Avenir Next", "SF Pro Display", "PingFang SC", "Noto Sans SC", "Microsoft YaHei", "Segoe UI", sans-serif;
  --font-serif: "Noto Serif SC", "Songti SC", "SimSun", serif;
  --font-mono: "JetBrains Mono", "SFMono-Regular", "Consolas", monospace;

  --animate-fade-in: fadeIn 0.3s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  --animate-slide-up: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  --animate-slide-in-right: slideInRight 0.3s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  --animate-scale-in: scaleIn 0.2s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  --animate-pulse-slow: pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  --animate-gradient-xy: gradient-xy 4s ease infinite;
  --animate-shimmer: shimmer 2s linear infinite;
  --animate-float: float 9s ease-in-out infinite;
  --animate-float-delayed: float 11s ease-in-out infinite -2s;

  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @keyframes slideUp {
    from {
      opacity: 0;
      transform: translateY(12px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes slideInRight {
    from {
      opacity: 0;
      transform: translateX(16px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes scaleIn {
    from {
      opacity: 0;
      transform: scale(0.96);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  @keyframes float {
    0%,
    100% {
      transform: translate3d(0, 0, 0) scale(1);
    }
    50% {
      transform: translate3d(0, -20px, 0) scale(1.03);
    }
  }

  @keyframes progress-indeterminate {
    0% {
      transform: translateX(-100%) scaleX(0.2);
    }
    50% {
      transform: translateX(0%) scaleX(0.5);
    }
    100% {
      transform: translateX(100%) scaleX(0.2);
    }
  }

  @keyframes gradient-xy {
    0% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
    100% {
      background-position: 0% 50%;
    }
  }

  @keyframes shimmer {
    0% {
      transform: translateX(-100%);
    }
    100% {
      transform: translateX(200%);
    }
  }
}

@layer base {
  :root {
    color-scheme: dark;
    --dashboard-topbar-height: 4rem;
    --dashboard-sticky-offset: calc(var(--dashboard-topbar-height) + 1rem);
  }

  html,
  body {
    min-height: 100%;
  }

  body {
    @apply text-zinc-200 font-sans antialiased min-h-screen selection:bg-emerald-500/30 selection:text-white;
    line-height: 1.6;
    word-break: break-word;
    background-color: var(--color-dark-bg);
    background-image:
      radial-gradient(circle at 0% 0%, rgba(16, 185, 129, 0.16), transparent 45%),
      radial-gradient(circle at 100% 10%, rgba(59, 130, 246, 0.12), transparent 40%),
      radial-gradient(circle at 50% 100%, rgba(245, 158, 11, 0.08), transparent 38%);
    background-attachment: fixed;
  }

  * {
    @apply border-zinc-800/80;
  }

  a {
    @apply transition-colors;
  }

  h1,
  h2,
  h3,
  h4 {
    @apply text-zinc-100 tracking-tight;
  }

  p {
    @apply text-zinc-300;
  }

  :focus-visible {
    @apply outline-none ring-2 ring-emerald-500/40 ring-offset-2 ring-offset-zinc-950;
  }
}

@layer components {
  .page-shell {
    @apply w-full max-w-6xl mx-auto;
  }

  .page-header {
    @apply flex flex-col gap-2 md:flex-row md:items-end md:justify-between;
  }

  .page-title {
    @apply text-2xl md:text-3xl font-semibold tracking-tight text-zinc-100;
  }

  .page-subtitle {
    @apply text-sm md:text-base text-zinc-500;
  }

  .content-section {
    @apply rounded-2xl p-5 md:p-6 bg-zinc-900/82 border border-zinc-800/80 shadow-xl backdrop-blur-md;
    background-image: linear-gradient(
      155deg,
      rgba(255, 255, 255, 0.05),
      rgba(255, 255, 255, 0) 30%
    );
  }

  .dashboard-page {
    @apply space-y-7;
  }

  .dashboard-page table {
    @apply w-full text-sm;
  }

  .dashboard-page thead tr {
    @apply border-b border-zinc-800/80;
  }

  .dashboard-page thead th {
    @apply pb-3 font-medium text-zinc-400;
  }

  .dashboard-page tbody tr {
    @apply border-b border-zinc-800/50;
  }

  .dashboard-page tbody td {
    @apply py-3 text-zinc-300;
  }

  .dashboard-sticky-offset {
    top: var(--dashboard-sticky-offset);
  }

  .auth-shell {
    @apply min-h-screen flex items-center justify-center p-4 relative overflow-hidden isolate;
  }

  .auth-shell::before,
  .auth-shell::after {
    content: "";
    position: absolute;
    border-radius: 9999px;
    filter: blur(120px);
    pointer-events: none;
    z-index: -1;
  }

  .auth-shell::before {
    width: 520px;
    height: 520px;
    top: 10%;
    left: 12%;
    background: rgba(16, 185, 129, 0.17);
    animation: float 11s ease-in-out infinite;
  }

  .auth-shell::after {
    width: 560px;
    height: 560px;
    right: 12%;
    bottom: 8%;
    background: rgba(56, 189, 248, 0.14);
    animation: float 12s ease-in-out infinite -1.5s;
  }

  .auth-card {
    @apply w-full max-w-md rounded-2xl p-8 md:p-10 shadow-2xl border border-white/10 bg-zinc-900/82 backdrop-blur-md;
    background-image: linear-gradient(
      155deg,
      rgba(255, 255, 255, 0.05),
      rgba(255, 255, 255, 0) 30%
    );
  }
}

@layer utilities {
  .animate-progress-indeterminate {
    animation: progress-indeterminate 1.5s infinite linear;
  }

  .animate-progress-shimmer {
    animation: shimmer 1.5s infinite ease-in-out;
  }

  .animate-float {
    animation: var(--animate-float);
  }

  .animate-float-delayed {
    animation: var(--animate-float-delayed);
  }

  .text-primary {
    @apply text-emerald-500;
  }

  .text-primary-hover {
    @apply hover:text-emerald-400;
  }

  .bg-primary {
    @apply bg-emerald-500;
  }

  .bg-primary-subtle {
    @apply bg-emerald-500/15;
  }

  .border-primary {
    @apply border-emerald-500;
  }

  .border-primary-subtle {
    @apply border-emerald-500/30;
  }

  .ring-primary {
    @apply ring-emerald-500;
  }

  .shadow-primary {
    @apply shadow-emerald-500/25;
  }

  .shadow-primary-lg {
    @apply shadow-lg shadow-emerald-500/20;
  }

  .shadow-primary-glow {
    @apply shadow-[0_0_24px_-4px_theme(colors.emerald.500)];
  }

  .focus-primary {
    @apply focus:border-emerald-500/50 focus:ring-1 focus:ring-emerald-500/30;
  }

  .bg-gradient-primary {
    @apply bg-gradient-to-r from-emerald-500 to-emerald-600;
  }

  .bg-gradient-primary-subtle {
    @apply bg-gradient-to-r from-emerald-500/10 to-emerald-600/10;
  }

  .text-accent {
    @apply text-amber-500;
  }

  .bg-accent {
    @apply bg-amber-500;
  }

  .bg-accent-subtle {
    @apply bg-amber-500/15;
  }

  .border-accent {
    @apply border-amber-500;
  }

  .shadow-accent-glow {
    @apply shadow-[0_0_24px_-4px_theme(colors.amber.500)];
  }

  .surface {
    @apply bg-zinc-900/95 border border-zinc-800 rounded-xl;
  }

  .surface-elevated {
    @apply bg-zinc-900 border border-zinc-700/60 rounded-xl shadow-xl;
  }

  .glass-card {
    @apply bg-zinc-900/82 border border-zinc-800/80 shadow-xl backdrop-blur-md rounded-xl transition-all duration-200;
    background-image: linear-gradient(
      155deg,
      rgba(255, 255, 255, 0.05),
      rgba(255, 255, 255, 0) 30%
    );
  }

  .glass-card:hover {
    @apply border-zinc-700/90 shadow-2xl;
  }

  .glass-panel {
    @apply bg-zinc-950/75 border border-zinc-800/60 backdrop-blur-sm;
  }

  .glass-input {
    @apply bg-zinc-950/55 border border-zinc-800 text-zinc-100 placeholder-zinc-500
           focus:border-emerald-500/55 focus:bg-zinc-950/80 focus:ring-1 focus:ring-emerald-500/35
           transition-all duration-200 rounded-lg hover:border-zinc-700;
  }

  .glass-input::placeholder {
    @apply text-zinc-500 transition-colors;
  }

  .glass-input:hover::placeholder {
    @apply text-zinc-400;
  }

  .glass-input:disabled {
    @apply cursor-not-allowed opacity-60 bg-zinc-900/45;
  }

  .glass-input[aria-invalid='true'],
  .glass-input[data-invalid='true'] {
    @apply border-red-500/55 ring-1 ring-red-500/25;
  }

  .glass-input[aria-invalid='true']:focus-visible,
  .glass-input[data-invalid='true']:focus-visible {
    @apply border-red-500/65 ring-2 ring-red-500/30;
  }

  .glass-input:-webkit-autofill,
  .glass-input:-webkit-autofill:hover,
  .glass-input:-webkit-autofill:focus {
    -webkit-text-fill-color: #f4f4f5;
    -webkit-box-shadow: 0 0 0 1000px rgba(9, 12, 18, 0.92) inset;
    transition: background-color 99999s ease-in-out 0s;
  }

  .range-slider {
    -webkit-appearance: none;
    appearance: none;
    height: 0.5rem;
    border-radius: 9999px;
    background: linear-gradient(
      90deg,
      rgba(16, 185, 129, 0.55),
      rgba(16, 185, 129, 0.35)
    );
    border: 1px solid rgba(39, 39, 42, 0.8);
    transition: box-shadow 0.2s ease, border-color 0.2s ease, opacity 0.2s ease;
  }

  .range-slider:hover {
    border-color: rgba(63, 63, 70, 0.95);
  }

  .range-slider:focus-visible {
    outline: none;
    box-shadow: 0 0 0 2px rgba(16, 185, 129, 0.28);
    border-color: rgba(16, 185, 129, 0.45);
  }

  .range-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 1rem;
    height: 1rem;
    border-radius: 9999px;
    border: 2px solid rgba(16, 185, 129, 0.85);
    background: #090f1a;
    box-shadow: 0 0 0 2px rgba(9, 15, 26, 0.95);
    cursor: pointer;
  }

  .range-slider::-moz-range-thumb {
    width: 1rem;
    height: 1rem;
    border-radius: 9999px;
    border: 2px solid rgba(16, 185, 129, 0.85);
    background: #090f1a;
    box-shadow: 0 0 0 2px rgba(9, 15, 26, 0.95);
    cursor: pointer;
  }

  .range-slider::-moz-range-track {
    height: 0.5rem;
    border-radius: 9999px;
    background: linear-gradient(
      90deg,
      rgba(16, 185, 129, 0.55),
      rgba(16, 185, 129, 0.35)
    );
    border: 1px solid rgba(39, 39, 42, 0.8);
  }

  .select-menu {
    @apply bg-zinc-950/70 border border-zinc-700/70 text-zinc-100 rounded-lg
           transition-all duration-200 hover:border-zinc-600
           focus:border-emerald-500/50 focus:bg-zinc-950/85 focus:ring-2 focus:ring-emerald-500/25;
    color-scheme: dark;
  }

  .select-menu option,
  .select-menu optgroup {
    background-color: #12151f;
    color: #e4e4e7;
  }

  .select-menu option {
    padding: 0.55rem 0.75rem;
    line-height: 1.35;
  }

  .select-menu option:checked {
    background-color: rgba(16, 185, 129, 0.24);
    color: #a7f3d0;
  }

  .select-menu option:hover,
  .select-menu option:focus {
    background-color: rgba(63, 63, 70, 0.9);
    color: #fafafa;
  }

  .select-menu option:disabled,
  .select-menu optgroup:disabled {
    color: #71717a;
  }

  .select-menu optgroup {
    font-weight: 600;
    color: #a1a1aa;
  }

  .select-popover-surface {
    @apply bg-zinc-950/95 backdrop-blur-xl border border-zinc-800/60 rounded-xl shadow-2xl shadow-black/55;
    background-image: linear-gradient(
      150deg,
      rgba(255, 255, 255, 0.06),
      rgba(255, 255, 255, 0) 34%,
      rgba(16, 185, 129, 0.06) 100%
    );
  }

  .select-popover-scroll-button {
    @apply flex cursor-default items-center justify-center py-1 text-zinc-500 transition-colors;
  }

  .select-popover-label {
    @apply px-2 py-1.5 text-xs font-semibold text-zinc-500 uppercase tracking-wider;
  }

  .select-popover-separator {
    @apply -mx-1 my-1 h-px bg-zinc-800/80;
  }

  .select-popover-item {
    @apply relative flex w-full cursor-pointer select-none items-center rounded-lg
           px-3 py-2.5 text-sm text-zinc-300 outline-none transition-all duration-150;
  }

  .select-popover-item[data-highlighted] {
    @apply bg-zinc-800/85 text-zinc-100;
    transform: translateX(2px);
  }

  .select-popover-item[data-state='checked'] {
    @apply bg-emerald-500/15 text-emerald-300 font-medium;
  }

  .select-popover-item[data-disabled] {
    @apply pointer-events-none opacity-45;
  }

  .text-gradient {
    @apply bg-clip-text text-transparent bg-gradient-to-r from-emerald-300 to-emerald-600;
  }

  .text-gradient-accent {
    @apply bg-clip-text text-transparent bg-gradient-to-r from-amber-300 to-orange-500;
  }

  .text-gradient-gold {
    @apply bg-clip-text text-transparent bg-gradient-to-r from-amber-200 to-yellow-500;
  }

  .btn-primary {
    @apply inline-flex items-center justify-center gap-2 whitespace-nowrap select-none
           border border-emerald-400/25
           bg-gradient-to-r from-emerald-500 to-emerald-600 text-white font-medium tracking-[0.01em]
           shadow-lg shadow-emerald-500/20 hover:shadow-emerald-500/35
           hover:-translate-y-0.5 active:translate-y-0
           transition-all duration-200 rounded-lg;
  }

  .btn-secondary {
    @apply inline-flex items-center justify-center gap-2 whitespace-nowrap select-none
           bg-zinc-800/90 text-zinc-200 font-medium tracking-[0.01em]
           hover:bg-zinc-700/95 hover:text-white
           border border-zinc-700 hover:border-zinc-600
           transition-all duration-200 rounded-lg;
  }

  .btn-ai {
    @apply inline-flex items-center justify-center gap-2 whitespace-nowrap select-none
           relative overflow-hidden
           bg-gradient-to-r from-amber-500 via-orange-500 to-amber-500
           bg-[length:200%_auto] animate-gradient-xy
           text-zinc-900 font-bold
           shadow-lg shadow-amber-500/30 hover:shadow-amber-500/45
           hover:-translate-y-0.5 active:translate-y-0
           transition-all duration-300 rounded-lg
           border border-amber-400/30;
  }

  .btn-ghost {
    @apply inline-flex items-center justify-center gap-2 whitespace-nowrap select-none
           text-zinc-400 hover:text-zinc-100 hover:bg-zinc-800/60
           border border-transparent hover:border-zinc-700/70
           transition-colors duration-200 rounded-lg;
  }

  .btn-danger {
    @apply inline-flex items-center justify-center gap-2 whitespace-nowrap select-none
           bg-red-500/10 text-red-400 font-medium tracking-[0.01em]
           hover:bg-red-500/20 border border-red-500/30
           transition-all duration-200 rounded-lg;
  }

  .btn-primary,
  .btn-secondary,
  .btn-ghost,
  .btn-danger,
  .btn-ai {
    touch-action: manipulation;
  }

  .btn-primary[aria-busy='true'],
  .btn-secondary[aria-busy='true'],
  .btn-ghost[aria-busy='true'],
  .btn-danger[aria-busy='true'],
  .btn-ai[aria-busy='true'] {
    @apply cursor-wait;
  }

  .btn-primary:focus-visible,
  .btn-secondary:focus-visible,
  .btn-ghost:focus-visible,
  .btn-danger:focus-visible,
  .btn-ai:focus-visible {
    @apply outline-none ring-2 ring-emerald-500/45 ring-offset-2 ring-offset-zinc-950;
  }

  .btn-primary:disabled,
  .btn-secondary:disabled,
  .btn-ghost:disabled,
  .btn-danger:disabled,
  .btn-ai:disabled {
    @apply opacity-55 pointer-events-none;
  }

  @media (hover: none) {
    .btn-primary:hover,
    .btn-secondary:hover,
    .btn-ai:hover,
    .btn-danger:hover {
      transform: none;
    }
  }

  .accent-bar {
    @apply w-1 h-6 bg-emerald-500 rounded-full;
  }

  .accent-bar-amber {
    @apply w-1 h-6 bg-amber-500 rounded-full;
  }

  .custom-scrollbar::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    @apply bg-transparent;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    @apply bg-zinc-700 rounded-full hover:bg-zinc-600 transition-colors;
  }

  .badge-success {
    @apply bg-emerald-500/15 text-emerald-400 border border-emerald-500/30;
  }

  .badge-warning {
    @apply bg-amber-500/15 text-amber-400 border border-amber-500/30;
  }

  .badge-error {
    @apply bg-red-500/15 text-red-400 border border-red-500/30;
  }

  .badge-info {
    @apply bg-blue-500/15 text-blue-400 border border-blue-500/30;
  }

  .badge-neutral {
    @apply bg-zinc-500/15 text-zinc-400 border border-zinc-500/30;
  }
}

/* Hide scrollbar for Chrome, Safari and Opera */
.no-scrollbar::-webkit-scrollbar {
  display: none;
}

/* Hide scrollbar for IE, Edge and Firefox */
.no-scrollbar {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}
